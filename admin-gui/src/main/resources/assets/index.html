<!doctype html>
<html lang="en" ng-app="admin">
<head>
    <meta charset="utf-8">
    <title>HAAS Admin</title>

    <link rel="stylesheet" href="webjars/angular-material/1.0.4/angular-material.min.css">

    <script src="webjars/angularjs/1.4.9/angular.min.js"></script>

    <script src="webjars/angularjs/1.4.9/angular-animate.min.js"></script>
    <script src="webjars/angularjs/1.4.9/angular-aria.min.js"></script>
    <script src="webjars/angularjs/1.4.9/angular-animate.min.js"></script>
    <script src="webjars/angularjs/1.4.9/angular-messages.min.js"></script>

    <script src="webjars/angular-material/1.0.4/angular-material.js"></script>

    <script src="webjars/jquery/3.0.0-alpha1/jquery.min.js"></script>

    <script src="webjars/lodash/4.0.0/lodash.min.js"></script>

    <style>
        .layout-margin {
            margin: 4px;
        }
    </style>

    <script type="text/javascript">
        var admin = angular.module('admin', ['ngMaterial']);

        admin.controller('AdminCtrl', function ($scope, $http) {
            $http({
                method: 'GET',
                url: '/api/infos'
            }).then(function (response) {
                $scope.entrypoints = response.data;
            });
        });


    </script>
</head>
<body ng-controller="AdminCtrl">
<md-content>
    <div layout="row" layout-wrap layout-padding>
        <div flex="33">
            <h1>En attente</h1>

            <div flex ng-repeat="entrypoint in entrypoints.pendingEntryPoints">
                <p class="md-body-1">Status <span class="md-body-2">{{entrypoint.status}}</span></p>

                <p class="md-body-1">Application <span class="md-body-2">{{entrypoint.application}}</span></p>

                <p class="md-body-1">Plateforme <span class="md-body-2">{{entrypoint.platform}}</span></p>

                <p class="md-body-1">HAProxy Cible <span class="md-body-2">{{entrypoint.haproxy}}</span></p>

                <p class="md-body-1">User HAProxy <span class="md-body-2">{{entrypoint.hapUser}}</span></p>

                <p class="md-body-1">Port SysLog <span class="md-body-2">{{entrypoint.syslogPort}}</span></p>

                <p class="md-body-1" ng-repeat="frontend in entrypoint.frontends">Frontend <span class="md-body-2">{{frontend.hostname}}</span>
                    -> <span class="md-body-2">{{frontend.port}}</span></p>

                <div ng-repeat="backend in entrypoint.backends">
                    <p class="md-body-1">Backend <span class="md-body-2">{{backend.hostname}}</span></p>

                    <p class="md-body-1" ng-repeat="server in backend.servers"
                       style="margin-left: 10px;margin-top: 0px;padding-top: 0px;margin-bottom: 0px;padding-bottom: 0px">
                        Instance <span class="md-body-2">{{server.id}}</span> sur <span class="md-body-2">{{server.hostname}} ({{server.ip}}:{{server.port}})</span>
                    </p>
                </div>
            </div>
        </div>
        <div flex="33">
            <h1>En deploiement</h1>

            <div flex ng-repeat="entrypoint in entrypoints.commitingEntryPoints">
                <p class="md-body-1">Status <span class="md-body-2">{{entrypoint.status}}</span></p>

                <p class="md-body-1">Application <span class="md-body-2">{{entrypoint.application}}</span></p>

                <p class="md-body-1">Plateforme <span class="md-body-2">{{entrypoint.platform}}</span></p>

                <p class="md-body-1">HAProxy Cible <span class="md-body-2">{{entrypoint.haproxy}}</span></p>

                <p class="md-body-1">User HAProxy <span class="md-body-2">{{entrypoint.hapUser}}</span></p>

                <p class="md-body-1">Port SysLog <span class="md-body-2">{{entrypoint.syslogPort}}</span></p>

                <p class="md-body-1" ng-repeat="frontend in entrypoint.frontends">Frontend <span class="md-body-2">{{frontend.hostname}}</span>
                    -> <span class="md-body-2">{{frontend.port}}</span></p>

                <div ng-repeat="backend in entrypoint.backends">
                    <p class="md-body-1">Backend <span class="md-body-2">{{backend.hostname}}</span></p>

                    <p class="md-body-1" ng-repeat="server in backend.servers"
                       style="margin-left: 10px;margin-top: 0px;padding-top: 0px;margin-bottom: 0px;padding-bottom: 0px">
                        Instance <span class="md-body-2">{{server.id}}</span> sur <span class="md-body-2">{{server.hostname}} ({{server.ip}}:{{server.port}})</span>
                    </p>
                </div>
            </div>
        </div>
        <div flex="33">
            <h1>Deploye</h1>

            <div flex ng-repeat="entrypoint in entrypoints.entryPoints">
                <p class="md-body-1">Status <span class="md-body-2">{{entrypoint.status}}</span></p>

                <p class="md-body-1">Application <span class="md-body-2">{{entrypoint.application}}</span></p>

                <p class="md-body-1">Plateforme <span class="md-body-2">{{entrypoint.platform}}</span></p>

                <p class="md-body-1">HAProxy Cible <span class="md-body-2">{{entrypoint.haproxy}}</span></p>

                <p class="md-body-1">User HAProxy <span class="md-body-2">{{entrypoint.hapUser}}</span></p>

                <p class="md-body-1">Port SysLog <span class="md-body-2">{{entrypoint.syslogPort}}</span></p>

                <p class="md-body-1" ng-repeat="frontend in entrypoint.frontends">Frontend <span class="md-body-2">{{frontend.hostname}}</span>
                    -> <span class="md-body-2">{{frontend.port}}</span></p>

                <div ng-repeat="backend in entrypoint.backends">
                    <p class="md-body-1">Backend <span class="md-body-2">{{backend.hostname}}</span></p>

                    <p class="md-body-1" ng-repeat="server in backend.servers"
                       style="margin-left: 10px;margin-top: 0px;padding-top: 0px;margin-bottom: 0px;padding-bottom: 0px">
                        Instance <span class="md-body-2">{{server.id}}</span> sur <span class="md-body-2">{{server.hostname}} ({{server.ip}}:{{server.port}})</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</md-content>

</body>
</html>