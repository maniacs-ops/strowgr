@version: 3.3

options {
  flush_lines (0);
  time_reopen (10);
  chain_hostnames (off);
  # use_dns (no);
  # use_fqdn (no);
};

filter f_local0 { facility(local0); };
filter f_syslog { level(info..emerg); };

############################################
# Conf pour la centralisation des logs HAP #
############################################

destination d_haproxy_centralisation_pao_log {udp(10.101.149.21 port(63403)); };
destination d_haproxy_centralisation_all_log {udp(10.101.149.21 port(55000)); };


############################
# Conf pour PAOLA et SESTA #
############################

# SYSLOG
#
source s_syslog { internal();};
destination d_syslog { file("/HOME/hapadm/SYSLOG/logs/syslog.log"); };
log { source(s_syslog); filter (f_syslog); destination(d_syslog); };

################################ CAF
#
# CAF PREP1
source s_caf_prep1 { udp(ip(127.0.0.1) port(50241)); };
destination d_caf_prep1 { file("/HOME/hapadm/CAF/logs/CAFPREP1/haproxy.log", perm(0664)); };
log { source(s_caf_prep1); filter(f_local0); destination(d_caf_prep1); };
# CAF PREP2
source s_caf_prep2 { udp(ip(127.0.0.1) port(50242)); };
destination d_caf_prep2 { file("/HOME/hapadm/CAF/logs/CAFPREP2/haproxy.log", perm(0664)); };
log { source(s_caf_prep2); filter(f_local0); destination(d_caf_prep2); };
# CAF PREP3
source s_caf_prep3 { udp(ip(127.0.0.1) port(50243)); };
destination d_caf_prep3 { file("/HOME/hapadm/CAF/logs/CAFPREP3/haproxy.log", perm(0664)); };
log { source(s_caf_prep3); filter(f_local0); destination(d_caf_prep3); };

################################ IDE
#
# IDE PREP1
source s_ide_prep1 { udp(ip(127.0.0.1) port(50514)); };
destination d_ide_prep1 { file("/HOME/hapadm/IDE/logs/IDEPREP1/haproxy.log", perm(0664)); };
log { source(s_ide_prep1); filter(f_local0); destination(d_ide_prep1); };

################################ IDP
#
# IDP PREP1
source s_idp_prep1 { udp(ip(127.0.0.1) port(50905)); };
destination d_idp_prep1 { file("/HOME/hapadm/IDP/logs/IDPPREP1/haproxy.log", perm(0664)); };
log { source(s_idp_prep1); filter(f_local0); destination(d_idp_prep1); };

# IDP PREP2
source s_idp_prep2 { udp(ip(127.0.0.1) port(50906)); };
destination d_idp_prep2 { file("/HOME/hapadm/IDP/logs/IDPPREP2/haproxy.log", perm(0664)); };
log { source(s_idp_prep2); filter(f_local0); destination(d_idp_prep2); };

################################ STF
#
# STF PREP1
source s_stf_prep1 { udp(ip(127.0.0.1) port(50518)); };
destination d_stf_prep1 { file("/HOME/hapadm/STF/logs/STFPREP1/haproxy.log", perm(0664)); };
log { source(s_stf_prep1); filter(f_local0); destination(d_stf_prep1); };
# STF PREP2
source s_stf_prep2 { udp(ip(127.0.0.1) port(50519)); };
destination d_stf_prep2 { file("/HOME/hapadm/STF/logs/STFPREP2/haproxy.log", perm(0664)); };
log { source(s_stf_prep2); filter(f_local0); destination(d_stf_prep2); };

################################ UNI
#
# UNI PREP1
source s_uni_prep1 { udp(ip(127.0.0.1) port(52060)); };
destination d_uni_prep1 { file("/HOME/hapadm/UNI/logs/UNIPREP1/haproxyUNIPREP1.log", perm(0664)); };
log { source(s_uni_prep1); filter(f_local0); destination(d_uni_prep1); };

################################ CMI
#
# CMI PREP1
source s_cmi_prep1 { udp(ip(127.0.0.1) port(52748)); };
destination d_cmi_prep1 { file("/HOME/hapadm/CMI/logs/CMIPREP1/haproxy.log", perm(0664)); };
log { source(s_cmi_prep1); filter(f_local0); destination(d_cmi_prep1); };

################################ VMO
#
# VMO PREP1
source s_vmo_prep1 { udp(ip(127.0.0.1) port(52346)); };
destination d_vmo_prep1 { file("/HOME/hapadm/VMO/logs/VMOPREP1/haproxyVMO.log", perm(0664)); };
log { source(s_vmo_prep1); filter(f_local0); destination(d_vmo_prep1); };
# VMO PREP2
source s_vmo_prep2 { udp(ip(127.0.0.1) port(52349)); };
destination d_vmo_prep2 { file("/HOME/hapadm/VMO/logs/VMOPREP2/haproxyVMO.log", perm(0664)); };
log { source(s_vmo_prep2); filter(f_local0); destination(d_vmo_prep2); };

# VSD PREP
#
source s_vsd_prep1 { udp(ip(127.0.0.1) port(50512)); };
destination d_vsd_prep1 { file("/HOME/hapadm/VSD/logs/VSDPREP1/haproxyVSDPREP1VSD.log", perm(0664)); };
log { source(s_vsd_prep1); filter(f_local0); destination(d_vsd_prep1); };

source s_vsd_prep2 { udp(ip(127.0.0.1) port(50508)); };
destination d_vsd_prep2 { file("/HOME/hapadm/VSD/logs/VSDPREP2/haproxyVSDPREP2VSD.log", perm(0664)); };
log { source(s_vsd_prep2); filter(f_local0); destination(d_vsd_prep2); };

source s_vsd_prep3 { udp(ip(127.0.0.1) port(50510)); };
destination d_vsd_prep3 { file("/HOME/hapadm/VSD/logs/VSDPREP3/haproxyVSDPREP3VSD.log", perm(0664)); };
log { source(s_vsd_prep3); filter(f_local0); destination(d_vsd_prep3); };

################################ WHR
#
# WHR PREP1
source s_whr_prep1 { udp(ip(127.0.0.1) port(52190)); };
destination d_whr_prep1 { file("/HOME/hapadm/WHR/logs/WHRPREP1DMZ1/haproxyWHR.log", perm(0664)); };
log { source(s_whr_prep1); filter(f_local0); destination(d_whr_prep1); };
# WHR PREP2
source s_whr_prep2 { udp(ip(127.0.0.1) port(52199)); };
destination d_whr_prep2 { file("/HOME/hapadm/WHR/logs/WHRPREP2dmz1/haproxyWHR.log", perm(0664)); };
log { source(s_whr_prep2); filter(f_local0); destination(d_whr_prep2); };

################################ ACW
#
# ACW PREP1
source s_acw_prep1 { udp(ip(127.0.0.1) port(50835)); };
destination d_acw_prep1 { file("/HOME/hapadm/ACW/logs/ACWPREP1/haproxyACW.log", perm(0664)); };
log { source(s_acw_prep1); filter(f_local0); destination(d_acw_prep1); };
# ACW PREP2
source s_acw_prep2 { udp(ip(127.0.0.1) port(51235)); };
destination d_acw_prep2 { file("/HOME/hapadm/ACW/logs/ACWPREP2/haproxyACW.log", perm(0664)); };
log { source(s_acw_prep2); filter(f_local0); destination(d_acw_prep2); };

################################ EPM
#
# EPM PREP1
source s_epm_prep1 { udp(ip(127.0.0.1) port(50356)); };
destination d_epm_prep1 { file("/HOME/hapadm/EPM/logs/EPMPREP1/haproxy.log", perm(0664)); };
log { source(s_epm_prep1); filter(f_local0); destination(d_epm_prep1); };

################################ PDK
#
# PDK PREP1
source s_pdk_prep1 { udp(ip(127.0.0.1) port(51600)); };
destination d_pdk_prep1 { file("/HOME/hapadm/PDK/logs/PDKPREP1/haproxyPDK.log", perm(0664)); };
log { source(s_pdk_prep1); filter(f_local0); destination(d_pdk_prep1); };
# PDK PREP2
source s_pdk_prep2 { udp(ip(127.0.0.1) port(51606)); };
destination d_pdk_prep2 { file("/HOME/hapadm/PDK/logs/PDKPREP2/haproxyPDK.log", perm(0664)); };
log { source(s_pdk_prep2); filter(f_local0); destination(d_pdk_prep2); };

################################ PME
#
# PME REC1
source s_pme_rec1 { udp(ip(127.0.0.1) port(52730)); };
destination d_pme_rec1 { file("/HOME/hapadm/PME/logs/PMEREC1/haproxyPME.log", perm(0664)); };
log { source(s_pme_rec1); filter(f_local0); destination(d_pme_rec1); };
#
# PME REC2
source s_pme_rec2 { udp(ip(127.0.0.1) port(52736)); };
destination d_pme_rec2 { file("/HOME/hapadm/PME/logs/PMEREC2/haproxyPMEREC2.log", perm(0664)); };
log { source(s_pme_rec2); filter(f_local0); destination(d_pme_rec2); };

################################ SIV
#
# SIV PREP1
source s_siv_prep1 { udp(ip(127.0.0.1) port(51597)); };
destination d_siv_prep1 { file("/HOME/hapadm/SIV/logs/SIVPREP1/haproxySIV.log", perm(0664)); };
log { source(s_siv_prep1); filter(f_local0); destination(d_siv_prep1); };

# MGR PREP1
#
source s_mgr_prep1 { udp(ip(127.0.0.1) port(51341)); };
destination d_mgr_prep1 { file("/HOME/hapadm/MGR/logs/MGRPREP1/haproxy.log", perm(0664)); };
log { source(s_mgr_prep1); filter(f_local0); destination(d_mgr_prep1); };

################################ MBL
#
# MBL PREP1
source s_mbl_pre { udp(ip(127.0.0.1) port(50063)); };
destination d_mbl_pre { file("/HOME/hapadm/MBL/logs/MBLPREP1/haproxy.log", perm(0664)); };
log { source(s_mbl_pre); filter(f_local0); destination(d_mbl_pre); };


################################ PAO
#
# PAO PREP1
source s_pao_prep1 { udp(ip(127.0.0.1) port(52620)); };
destination d_pao_prep1 { file("/HOME/hapadm/PAO/logs/PAOPREP1/haproxyPAO.log", perm(0664)); };
log { source(s_pao_prep1); filter(f_local0); destination(d_pao_prep1); };
log { source(s_pao_prep1); filter(f_local0); destination(d_haproxy_centralisation_pao_log); };
#
# PAO PREP2
source s_pao_prep2 { udp(ip(127.0.0.1) port(52625)); };
destination d_pao_prep2 { file("/HOME/hapadm/PAO/logs/PAOPREP2/haproxyPAO.log", perm(0664)); };
log { source(s_pao_prep2); filter(f_local0); destination(d_pao_prep2); };
log { source(s_pao_prep2); filter(f_local0); destination(d_haproxy_centralisation_pao_log); };


################################ ABT
#
# ABT PREP1
source s_abt_prep1 { udp(ip(127.0.0.1) port(57110)); };
destination d_abt_prep1 { file("/HOME/hapadm/ABT/logs/ABTPREP1/haproxyABTPREP1.log", perm(0664)); };
log { source(s_abt_prep1); filter(f_local0); destination(d_abt_prep1); };


################################ PAT
#
# PAT PREP1
filter f_pat_patweb1pat { facility(local0) and match("PATWEB1PAT" value("MESSAGE")); };
filter f_pat_patbo1pat { facility(local0) and match("PATBO1PAT" value("MESSAGE")); };
source s_pat_prep1 { udp(ip(127.0.0.1) port(57100)); };
destination d_patprep1web { file("/HOME/hapadm/PAT/logs/PATPREP1/haproxyPATPREP1WEB.log", perm(0664)); };
destination d_patprep1bo { file("/HOME/hapadm/PAT/logs/PATPREP1/haproxyPATPREP1BO.log", perm(0664)); };
log { source(s_pat_prep1); filter(f_pat_patweb1pat); destination(d_patprep1web); };
log { source(s_pat_prep1); filter(f_pat_patbo1pat); destination(d_patprep1bo); };

################################ PAY
#
# PAY PREP1
source s_pay_prep1 { udp(ip(127.0.0.1) port(51160)); };
destination d_pay_prep1 { file("/HOME/hapadm/PAY/logs/PAYPREP1/haproxyPAYPREP1.log", perm(0664)); };
log { source(s_pay_prep1); filter(f_local0); destination(d_pay_prep1); };


################################ MAW
#
# MAW PREP1
source s_maw_prep1 { udp(ip(127.0.0.1) port(52731)); };
destination d_maw_prep1 { file("/HOME/hapadm/MAW/logs/MAWPREP1/haproxyMAWPREP1.log", perm(0664)); };
log { source(s_maw_prep1); filter(f_local0); destination(d_maw_prep1); };


################################ TMO
#
# TMO REC1
source s_tmo_rec1 { udp(ip(127.0.0.1) port(50600)); };
destination d_tmo_rec1 { file("/HOME/hapadm/TMO/logs/TMOREC1/haproxyTMOREC1.log", perm(0664)); };
log { source(s_tmo_rec1); filter(f_local0); destination(d_tmo_rec1); };
#
# TMO REC2
source s_tmo_rec2 { udp(ip(127.0.0.1) port(50620)); };
destination d_tmo_rec2 { file("/HOME/hapadm/TMO/logs/TMOREC2/haproxyTMOREC2.log", perm(0664)); };
log { source(s_tmo_rec2); filter(f_local0); destination(d_tmo_rec2); };


################################ VSB
#
# VSB PREP1
source s_vsb_prep1 { udp(ip(127.0.0.1) port(50502)); };
destination d_vsb_prep1 { file("/HOME/hapadm/VSB/logs/VSBPREP1/haproxyVSBPREP1VSB.log", perm(0664)); };
log { source(s_vsb_prep1); filter(f_local0); destination(d_vsb_prep1); };
# VSB PREP3
source s_vsb_prep3 { udp(ip(127.0.0.1) port(50504)); };
destination d_vsb_prep3 { file("/HOME/hapadm/VSB/logs/VSBPREP3/haproxyVSBPREP3VSB.log", perm(0664)); };
log { source(s_vsb_prep3); filter(f_local0); destination(d_vsb_prep3); };

################################ TDP
#
# TDP PREP1
source s_tdp_prep1 { udp(ip(127.0.0.1) port(52755)); };
destination d_tdp_prep1 { file("/HOME/hapadm/TDP/logs/TDPPREP1/haproxyTDPPREP1VSLMIW.log", perm(0664)); };
log { source(s_tdp_prep1); filter(f_local0); destination(d_tdp_prep1); };

############ VAD PREP1 ####
source s_vad_prep1 { udp(ip(127.0.0.1) port(51253)); };
destination d_vad_prep1 { file("/HOME/hapadm/VAD/logs/VADPREP1/haproxyVADPREP1.log", perm(0664)); };
log { source(s_vad_prep1); filter(f_local0); destination(d_vad_prep1); };

################################ FTC
#
# FTC PREP1
source s_ftc_prep1 { udp(ip(127.0.0.1) port(52696)); };
destination d_ftc_prep1 { file("/HOME/hapadm/FTC/logs/FTCPREP1/haproxyFTCPREP1FTC.log", perm(0664)); };
log { source(s_ftc_prep1); filter(f_local0); destination(d_ftc_prep1); };

################################ GRA
#
# GRA PREP1
############ GRA CAR ####
source s_gracar_prep1 { udp(ip(127.0.0.1) port(52630)); };
destination d_gracar_prep1 { file("/HOME/hapadm/GRA/logs/GRACARH1/haproxyGRACARH1.log", perm(0664)); };
log { source(s_gracar_prep1); filter(f_local0); destination(d_gracar_prep1); };
log { source(s_gracar_prep1); filter(f_local0); destination(d_haproxy_centralisation_all_log); };
############ GRA WEB ####
source s_graweb_prep1 { udp(ip(127.0.0.1) port(52633)); };
destination d_graweb_prep1 { file("/HOME/hapadm/GRA/logs/GRAWEBH1/haproxyGRAWEBH1.log", perm(0664)); };
log { source(s_graweb_prep1); filter(f_local0); destination(d_graweb_prep1); };
log { source(s_graweb_prep1); filter(f_local0); destination(d_haproxy_centralisation_all_log); };
#
################################ WDI
#
# WDI PREP1
source s_wdi_prep1 { udp(ip(127.0.0.1) port(52711)); };
filter f_wdi_prep1ben { facility(local0) and ( match("ben_prep1" value("MESSAGE"))  );  };
destination d_wdi_prep1 { file("/HOME/hapadm/WDI/logs/WDIPREP1BEN/haproxyWDIPREP1WDIBEN.log", perm(0664)); };
log { source(s_wdi_prep1); filter(f_wdi_prep1ben); destination(d_wdi_prep1); };
# WDI PREP2
source s_wdi_prep2 { udp(ip(127.0.0.1) port(52712)); };
filter f_wdi_prep2ben { facility(local0) and ( match("ben_prep2" value("MESSAGE"))  );  };
destination d_wdi_prep2 { file("/HOME/hapadm/WDI/logs/WDIPREP1BEN/haproxyWDIPREP2WDIBEN.log", perm(0664)); };
log { source(s_wdi_prep2); filter(f_wdi_prep2ben); destination(d_wdi_prep2); };

################################ PPA
#
# PPA PREP1
filter f_ppa_ppaprep1api { facility(local0) and match("PPAPREP1API" value("MESSAGE")); };
filter f_ppa_ppaprep1adm { facility(local0) and match("PPAPREP1ADM" value("MESSAGE")); };
source s_ppa_prep1 { udp(ip(127.0.0.1) port(52780)); };
destination d_ppaprep1api { file("/HOME/hapadm/PPA/logs/PPAPREP1/haproxyPPAPREP1API.log", perm(0664)); };
destination d_ppaprep1adm { file("/HOME/hapadm/PPA/logs/PPAPREP1/haproxyPPAPREP1ADM.log", perm(0664)); };
log { source(s_ppa_prep1); filter(f_ppa_ppaprep1api); destination(d_ppaprep1api); };
log { source(s_ppa_prep1); filter(f_ppa_ppaprep1adm); destination(d_ppaprep1adm); };

################################ LYM
#
## LYM PREP 1
#
source s_LYM_prep1 { udp(ip(127.0.0.1) port(51898)); };
filter f_lym_webandh1 { facility(local0) and match("LYMPREP1AND" value("MESSAGE")); };
filter f_lym_webiphh1 { facility(local0) and match("LYMPREP1IPH" value("MESSAGE")); };
filter f_lym_webwebh1 { facility(local0) and match("LYMPREP1WEB" value("MESSAGE")); };
destination d_LYM_prep1_weband { file("/HOME/hapadm/LYM/logs/LYMPREP1/haproxyLYMPREPBAND.log", perm(0664)); };
destination d_LYM_prep1_webiph { file("/HOME/hapadm/LYM/logs/LYMPREP1/haproxyLYMPREPBIPH.log", perm(0664)); };
destination d_LYM_prep1_webweb { file("/HOME/hapadm/LYM/logs/LYMPREP1/haproxyLYMPREPBWEB.log", perm(0664)); };
log { source(s_LYM_prep1); filter(f_lym_webandh1); destination(d_LYM_prep1_weband); };
log { source(s_LYM_prep1); filter(f_lym_webiphh1); destination(d_LYM_prep1_webiph); };
log { source(s_LYM_prep1); filter(f_lym_webwebh1); destination(d_LYM_prep1_webweb); };
## LYM REC 2
#
source s_LYM_prep2 { udp(ip(127.0.0.1) port(51937)); };
filter f_lym_webandh2 { facility(local0) and match("LYMPREP2AND" value("MESSAGE")); };
filter f_lym_webiphh2 { facility(local0) and match("LYMPREP2IPH" value("MESSAGE")); };
filter f_lym_webwebh2 { facility(local0) and match("LYMPREP2WEB" value("MESSAGE")); };
destination d_LYM_prep2_weband { file("/HOME/hapadm/LYM/logs/LYMPREP2/haproxyLYMPREPAND.log", perm(0664)); };
destination d_LYM_prep2_webiph { file("/HOME/hapadm/LYM/logs/LYMPREP2/haproxyLYMPREPIPH.log", perm(0664)); };
destination d_LYM_prep2_webweb { file("/HOME/hapadm/LYM/logs/LYMPREP2/haproxyLYMPREPWEB.log", perm(0664)); };
log { source(s_LYM_prep2); filter(f_lym_webandh2); destination(d_LYM_prep2_weband); };
log { source(s_LYM_prep2); filter(f_lym_webiphh2); destination(d_LYM_prep2_webiph); };
log { source(s_LYM_prep2); filter(f_lym_webwebh2); destination(d_LYM_prep2_webweb); };

# REL PREP1
source s_rel_prep1 { udp(ip(127.0.0.1) port(52770)); };
destination d_rel_prep1 { file("/HOME/hapadm/REL/logs/RELPREP1/haproxyRELPREP1REL.log", perm(0664)); };
log { source(s_rel_prep1); filter(f_local0); destination(d_rel_prep1); };

####
###  VSA
# PREP2
source s_vsa_prep2 { udp(ip(127.0.0.1) port(52761)); };
destination d_vsa_prep2 { file("/HOME/hapadm/VSA/logs/VSAPREP2/haproxy.log", perm(0664)); };
log { source(s_vsa_prep2); filter(f_local0); destination(d_vsa_prep2); };
# PREP3
source s_vsa_prep3 { udp(ip(127.0.0.1) port(52762)); };
destination d_vsa_prep3 { file("/HOME/hapadm/VSA/logs/VSAPREP3/haproxy.log", perm(0664)); };
log { source(s_vsa_prep3); filter(f_local0); destination(d_vsa_prep3); };


################################ LIT
#
# LIT PREP1
source s_lit_prep1 { udp(ip(127.0.0.1) port(51776)); };
destination d_lit_prep1 { file("/HOME/hapadm/LIT/logs/LITPREP1/haproxyLITPREP1.log", perm(0664)); };
log { source(s_lit_prep1); filter(f_local0); destination(d_lit_prep1); };
# LIT PREP2
source s_lit_prep2 { udp(ip(127.0.0.1) port(51778)); };
destination d_lit_prep2 { file("/HOME/hapadm/LIT/logs/LITPREP2/haproxyLITPREP2.log", perm(0664)); };
log { source(s_lit_prep2); filter(f_local0); destination(d_lit_prep2); };

################################ TRI
#
# TRI PREP1
source s_tri_prep1 { udp(ip(127.0.0.1) port(51760)); };
destination d_tri_prep1 { file("/HOME/hapadm/TRI/logs/TRIPREP1/haproxyTRIPREP1.log", perm(0664)); };
log { source(s_tri_prep1); filter(f_local0); destination(d_tri_prep1); };

################################ MPD
#
# MPD PREP1
source s_mpd_prep1 { udp(ip(127.0.0.1) port(50930)); };
destination d_mpd_prep1 { file("/HOME/hapadm/MPD/logs/MPDPREP1/haproxyMPDPREP1.log", perm(0664)); };
log { source(s_mpd_prep1); filter(f_local0); destination(d_mpd_prep1); };
#
# MPD PREP2
source s_mpd_prep2 { udp(ip(127.0.0.1) port(50932)); };
destination d_mpd_prep2 { file("/HOME/hapadm/MPD/logs/MPDPREP2/haproxyMPDPREP2.log", perm(0664)); };
log { source(s_mpd_prep2); filter(f_local0); destination(d_mpd_prep2); };

################################ MUR
#
# MUR REC1
source s_mur_prep1 { udp(ip(127.0.0.1) port(51700)); };
destination d_mur_prep1 { file("/HOME/hapadm/MUR/logs/MURPREP1/haproxyMURPREP1.log", perm(0664)); };
log { source(s_mur_prep1); filter(f_local0); destination(d_mur_prep1); };

################################ PRS
#
# PRS PREP1
source s_prs_prep1 { udp(ip(127.0.0.1) port(50006)); };
destination d_prs_prep1 { file("/HOME/hapadm/PRS/logs/PRSPREP1/haproxyPRSPREP1.log", perm(0664)); };
log { source(s_prs_prep1); filter(f_local0); destination(d_prs_prep1); };
